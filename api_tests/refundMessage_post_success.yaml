# Test generated by RoostGPT for test api-gpt4-turbo using AI Type Open AI and AI Model gpt-4-1106-preview


# Test generated for /icd/s2s/exchange/refundMessage_post for http method type POST in artillery framework

# RoostTestHash=19003958c4


config:
  target: "{{ $processEnvironment.API_HOST }}"
  phases:
    - duration: 60
      arrivalRate: 1
  payload:
    path: "refundMessage_post_success.csv"
    fields:
      - "headerVersion"
      - "timestamp"
      - "applicationId"
      - "sourceId"
      - "transactionId"
      - "messageContentType"
      - "messageContentEncoding"
      - "payloadHashValue"
      - "hashingAlgorithm"
      - "augmentationKey"
      - "augmentationValue"
      - "documentNumber"
      - "issuanceDate"
      - "refundIndicator"
      - "refundUID"
      - "relatedRefundUID"
      - "oadCode"
      - "cityPointOfSale"
      - "areaPointOfSale"
      - "countryPointOfSale"
      - "issuerSystem"
      - "amount"
      - "currency"
      - "taxISOCode"
      - "taxCityCode"
      - "fopType"
      - "maskedCardNumber"
      - "vendorCode"
      - "binNumber"
      - "lastFour"
    skipHeader: true
  plugins:
    expect: {}

scenarios:
  - name: "Submit refund message to ARA"
    flow:
      # POST Refund Message - Positive Test Case
      - post:
          url: "/icd/s2s/exchange/refundMessage"
          # Describe the scenario
          # This step will attempt to post a refund message to the ARA API with a valid payload and expect a 200 status code.
          json:
            messageHeader:
              headerVersion: "{{ headerVersion }}"
              timestamp: "{{ timestamp }}"
              sourceContext:
                applicationId: "{{ applicationId }}"
                sourceId: "{{ sourceId }}"
                transactionId: "{{ transactionId }}"
              messageContext:
                messageContentType: "{{ messageContentType }}"
                messageContentEncoding: "{{ messageContentEncoding }}"
                payloadHashValue: "{{ payloadHashValue }}"
                hashingAlgorithm: "{{ hashingAlgorithm }}"
            augmentationPoint:
              - augmentationKey: "{{ augmentationKey }}"
                augmentationValue: "{{ augmentationValue }}"
            payload:
              refundTransactions:
                documentNumber: "{{ documentNumber }}"
                issuanceDate: "{{ issuanceDate }}"
                refundIndicator: "{{ refundIndicator }}"
                refundUID: "{{ refundUID }}"
                relatedRefundUID: "{{ relatedRefundUID }}"
                oadCode: "{{ oadCode }}"
                refundedCoupons:
                  - "1"
                  - "2"
                  - "3"
                  - "4"
              refundingAgentDetails:
                cityPointOfSale: "{{ cityPointOfSale }}"
                areaPointOfSale: "{{ areaPointOfSale }}"
                countryPointOfSale: "{{ countryPointOfSale }}"
                issuerSystem: "{{ issuerSystem }}"
          headers:
            Content-Type: "application/json"
            Authorization: "{{#if $processEnvironment.SECURITY_SCHEMA.in === 'header'}}{{ $processEnvironment.SECURITY_SCHEMA.name }}: {{ $processEnvironment.AUTH_TOKEN }}{{/if}}"
          expect:
            - statusCode: 200
            - hasProperty: "messageHeader"
            - hasProperty: "augmentationPoint"
            - hasProperty: "payload"
          think: 1

