# ********RoostGPT********

# Test generated by RoostGPT for test karateCircleCIFile using AI Type Claude AI and AI Model claude-3-7-sonnet-20250219
# 
# Feature file generated for /jobs/{job-id}/cancel_post for http method type POST 
# RoostTestHash=647b98788e
# 
# 

# ********RoostGPT********
Feature: Cancel job by job ID

  Background:
    * def urlBase = karate.properties['URL_BASE']
    * def uuidPattern = '^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$'

  Scenario Outline: Cancel job with valid job ID
    Given url urlBase
    And path '/jobs', jobId, 'cancel'
    When method POST
    Then status 200
    And match response == { message: '#string' }
    And match response.message != null
    And match header Content-Type == 'application/json'

    Examples:
      | read('jobs_job-id_cancel_post.csv') |

  Scenario: Cancel job with invalid job ID format
    Given url urlBase
    And path '/jobs', 'invalid-job-id', 'cancel'
    When method POST
    Then status 400
    And match response == { message: '#string' }
    And match response.message != null
    And match header Content-Type == 'application/json'

  Scenario: Cancel job with unauthorized access
    Given url urlBase
    And path '/jobs', '123e4567-e89b-12d3-a456-426614174000', 'cancel'
    And header Authorization = 'invalid-token'
    When method POST
    Then status 401
    And match response == { message: '#string' }
    And match response.message != null
    And match header Content-Type == 'application/json'

  Scenario: Cancel job with forbidden access
    Given url urlBase
    And path '/jobs', '123e4567-e89b-12d3-a456-426614174000', 'cancel'
    When method POST
    Then status 403
    And match response == { message: '#string' }
    And match response.message != null
    And match header Content-Type == 'application/json'

  Scenario: Cancel non-existent job
    Given url urlBase
    And path '/jobs', '123e4567-e89b-12d3-a456-426614174999', 'cancel'
    When method POST
    Then status 404
    And match response == { message: '#string' }
    And match response.message != null
    And match header Content-Type == 'application/json'

  Scenario: Validate job ID format
    Given url urlBase
    And path '/jobs', '123e4567-e89b-12d3-a456-426614174000', 'cancel'
    When method POST
    Then match '123e4567-e89b-12d3-a456-426614174000' matches uuidPattern
