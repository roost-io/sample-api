# ********RoostGPT********

# Test generated by RoostGPT for test api-testing-karate-circle-ci using AI Type Azure Open AI and AI Model roostgpt-4-32k
# 
# Feature file generated for /context/{context-id}/environment-variable/{env-var-name}_delete for http method type DELETE 
# RoostTestHash=197f97d38b
# 
# 

# ********RoostGPT********
Feature: Delete Environment Variable from Context API
  Description: Tests for deleting an environment variable from a context.

  Background:
    * def urlBase = karate.properties['URL_BASE']
    * url urlBase

  Scenario Outline: Successful deletion with valid inputs
    Given path 'context', '<context-id>', 'environment-variable', '<env-var-name>'
    And request """{}"""
    When method DELETE
    Then status 200
    And match response == '#object'
    And match response.message == '#string'

    Examples:
      | read('context_context-id_environment-variable_env-var-name_delete.csv') |

  Scenario: Default error response for non-existing environment variable
    Given path 'context', '123e4567-e89b-12d3-a456-426614174000', 'environment-variable', 'NON_EXISTING_ENV'
    And request """{}"""
    When method DELETE
    Then status 404
    And match response == '#object'
    And match response.message == '#string'

  Scenario Outline: Validation for missing context-id or env-var-name in path
    Given path 'context', '<context-id>', 'environment-variable', '<env-var-name>'
    And request """{}"""
    When method DELETE
    Then status 404

    Examples:
      | context-id                           | env-var-name  |
      | ''                                   | POSTGRES_USER |
      | 123e4567-e89b-12d3-a456-426614174000 | ''            |
      | ''                                   | ''            |

  Scenario: Response validation for headers
    Given path 'context', '123e4567-e89b-12d3-a456-426614174000', 'environment-variable', 'POSTGRES_USER'
    And request """{}"""
    When method DELETE
    Then status 200
    And match response == '#object'
    And match response.message == '#string'
    And match karate.prevRequestMethod == 'DELETE'
    And match headers.Content-Type contains 'application/json'

  Scenario: Error for invalid UUID format in context-id
    Given path 'context', 'INVALID_UUID', 'environment-variable', 'POSTGRES_USER'
    And request """{}"""
    When method DELETE
    Then status 404
    And match response == '#object'
    And match response.message == '#string'
