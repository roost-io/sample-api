# ********RoostGPT********

# Test generated by RoostGPT for test api-testing-karate-circleci-OAI-security using AI Type Azure Open AI and AI Model roostgpt-4-32k
# 
# Feature file generated for /context/{context-id}/environment-variable_get for http method type GET 
# RoostTestHash=550114089b
# 
# 

# ********RoostGPT********
Feature: List Environment Variables in a Context

  Background:
    * def urlBase = karate.properties['api_host_url']
    * url urlBase
    * configure headers = { Authorization: 'Basic ' + karate.properties['AUTH_TOKEN'] }

  Scenario Outline: Fetch environment variables for a given context ID with optional page token
    Given path '/context/<context-id>/environment-variable'
    And param page-token = <page-token>
    When method GET
    Then status <status-code>
    And match response.items == '#[] object'
    And match response.items[*].variable == '#string'
    And match response.items[*].created_at == '##string'
    And match response.items[*].updated_at == '##string'
    And match response.items[*].context_id == '##string'
    And match response.next_page_token == '#? _ == null || typeof _ == "string"'

    Examples:
      | context-id                           | page-token | status-code |
      | b9291e0d-a11e-41fb-8517-c545388b5953 | null       |         200 |
      | b9291e0d-a11e-41fb-8517-c545388b5953 | nextPage   |         200 |
      | invalid-context-id                   | null       |         404 |

  Scenario: Fetch environment variables without a page token
    Given path '/context/be8bb2e3-c3d6-4098-89f4-572ff976ba9a/environment-variable'
    When method GET
    Then status 200
    And match response.items == '#[] object'
    And match response.items[?].variable == '#string'
    And match response.items[?].created_at == '##string'
    And match response.items[?].updated_at == '##string'
    And match response.items[?].context_id == '##string'
    And match response.next_page_token == '#? _ == null || typeof _ == "string"'

  Scenario: Error response for invalid context ID
    Given path '/context/invalid-context-id/environment-variable'
    When method GET
    Then status 404
    And match response.message == '##string'

  Scenario Outline: Validate response format for all security fields
    Given path '/context/<context-id>/environment-variable'
    When method GET
    Then status <status-code>
    And match response == '#? _.items != null && typeof _.items == "object"'
    And match response.items[?].variable == '#string'
    And match response.items[?].created_at == '##string'
    And match response.items[?].updated_at == '##string'
    And match response.items[?].context_id == '##string'
    And match response.next_page_token == '#? _ == null || typeof _ == "string"'

    Examples:
      | context-id                           | status-code |
      |               44n9wujWcTnVZ2b5S8Fnat |         200 |
      | 1c23d2cb-07b1-4a28-8af3-e369732050ed |         404 |
