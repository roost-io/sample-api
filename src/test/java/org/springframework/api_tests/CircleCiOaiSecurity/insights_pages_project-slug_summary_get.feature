# ********RoostGPT********

# Test generated by RoostGPT for test api-testing-karate-circleci-OAI-security using AI Type Azure Open AI and AI Model roostgpt-4-32k
# 
# Feature file generated for /insights/pages/{project-slug}/summary_get for http method type GET 
# RoostTestHash=ff247d2d67
# 
# 

# ********RoostGPT********
Feature: CircleCI Insights API - Get Summary Metrics and Trends

  Background:
    * def urlBase = karate.properties['api_host_url']
    * url urlBase
    * path 'insights/pages'

  Scenario Outline: Get summary data for a project
    Given path '<project-slug>/summary'
    And param reporting-window = <reporting-window>
    And param branches = <branches>
    And param workflow-names = <workflow-names>
    And header Authorization = 'Basic ' + karate.properties['circle-token']
    When method GET
    Then status <status>
    And match response.org_id == '##string'
    And match response.project_id == '##string'
    And match response.project_data.metrics.total_runs == '#number'
    And match response.project_data.metrics.total_duration_secs == '#number'
    And match response.project_data.metrics.total_credits_used == '#number'
    And match response.project_data.metrics.success_rate == '#number'
    And match response.project_data.metrics.throughput == '#number'
    And match response.project_data.trends.total_runs == '#number'
    And match response.project_data.trends.total_duration_secs == '#number'
    And match response.project_data.trends.total_credits_used == '#number'
    And match response.project_data.trends.success_rate == '#number'
    And match response.project_data.trends.throughput == '#number'
    And match response.project_workflow_data[*].workflow_name == '##string'
    And match response.project_workflow_data[*].metrics.total_credits_used == '#number'
    And match response.project_workflow_data[*].metrics.p95_duration_secs == '#number'
    And match response.project_workflow_data[*].metrics.total_runs == '#number'
    And match response.project_workflow_data[*].metrics.success_rate == '#number'
    And match response.project_workflow_data[*].trends.total_credits_used == '#number'
    And match response.project_workflow_data[*].trends.p95_duration_secs == '#number'
    And match response.project_workflow_data[*].trends.total_runs == '#number'
    And match response.project_workflow_data[*].trends.success_rate == '#number'
    And match response.project_workflow_branch_data[*].workflow_name == '##string'
    And match response.project_workflow_branch_data[*].branch == '##string'
    And match response.project_workflow_branch_data[*].metrics.total_credits_used == '#number'
    And match response.project_workflow_branch_data[*].metrics.p95_duration_secs == '#number'
    And match response.project_workflow_branch_data[*].metrics.total_runs == '#number'
    And match response.project_workflow_branch_data[*].metrics.success_rate == '#number'
    And match response.project_workflow_branch_data[*].trends.total_credits_used == '#number'
    And match response.project_workflow_branch_data[*].trends.p95_duration_secs == '#number'
    And match response.project_workflow_branch_data[*].trends.total_runs == '#number'
    And match response.project_workflow_branch_data[*].trends.success_rate == '#number'
    And match response.all_workflows == '#[] string'
    And match response.all_branches == '#[] string'

    Examples:
      | project-slug                          | reporting-window | branches            | workflow-names               | status |
      | 'gh/CircleCI-Public/api-preview-docs' | 'last-90-days'   | ['main', 'feature'] | ['build', 'test-and-deploy'] |    200 |
      | 'gh/CircleCI-Public/api-preview-docs' | 'last-30-days'   | ['main']            | ['build-and-test']           |    200 |
