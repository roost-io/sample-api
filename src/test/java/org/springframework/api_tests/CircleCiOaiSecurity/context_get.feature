# ********RoostGPT********

# Test generated by RoostGPT for test api-testing-karate-circleci-OAI-security using AI Type Azure Open AI and AI Model roostgpt-4-32k
# 
# Feature file generated for /context_get for http method type GET 
# RoostTestHash=ae15e2262e
# 
# 

# ********RoostGPT********
Feature: API Testing for Context Endpoint

  Background:
    * def urlBase = karate.properties['API_BASE_URL']
    * url urlBase
    * configure headers = { Authorization: karate.properties['Circle-Token'] }

  Scenario Outline: Validate List Contexts API with various query parameters
    Given path '/context'
    And param owner-id = <owner_id>
    And param owner-slug = <owner_slug>
    And param owner-type = <owner_type>
    And param page-token = <page_token>
    When method GET
    Then status 200
    And match response.items == '#array'
    And match each response.items[*].id == '#string'
    And match each response.items[*].id == '#? _ != null && /^[a-f0-9\\-]{36}$/.test(_)'
    And match each response.items[*].name == '#string'
    And match each response.items[*].name == '#? _ != null && _ != ""'
    And match each response.items[*].created_at == '#string'
    And match each response.items[*].created_at == '#? _ != null && /^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}\\.[0-9]{3}Z$/.test(_)'
    And match response.next_page_token == '#? _ == null || #string'

    Examples:
      | read('context_get.csv') |

  Scenario Outline: Validate Error Response for Invalid List Contexts API Query Parameters
    Given path '/context'
    And param owner-id = <owner_id>
    And param owner-slug = <owner_slug>
    And param owner-type = <owner_type>
    And param page-token = <page_token>
    When method GET
    Then status 400
    And match response.message == '#string'
    And match response.message == '#? _ != null && typeof _ == "string"'

    Examples:
      | owner_id            | owner_slug | owner_type | page_token |
      | invalid_uuid_format | null       | null       | NEXT_TOKEN |
      | null                | null       | null       | NEXT_TOKEN |
      | null                | null       | invalid    | invalid    |

  Scenario Outline: Validate Unauthorized Access to List Contexts API
    * configure headers = { Authorization: null }
    Given path '/context'
    And param owner-id = <owner_id>
    And param owner-slug = <owner_slug>
    And param owner-type = <owner_type>
    And param page-token = <page_token>
    When method GET
    Then status 401
    And match response.message == '#string'
    And match response.message == '#? _ != null && typeof _ == "string"'

    Examples:
      | owner_id                             | owner_slug | owner_type   | page_token |
      | c65b68ef-e73b-4bf2-be9a-7a322a9df150 | null       | organization | NEXT_TOKEN |
      | null                                 | slug_id    | organization | null       |
