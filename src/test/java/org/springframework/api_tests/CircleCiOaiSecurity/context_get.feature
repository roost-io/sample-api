# ********RoostGPT********

# Test generated by RoostGPT for test api-testing-karate-circleci-OAI-security using AI Type Azure Open AI and AI Model roostgpt-4-32k
# 
# Feature file generated for /context_get for http method type GET 
# RoostTestHash=ade48cf9b7
# 
# 

# ********RoostGPT********
Feature: CircleCI API - Context Endpoint Testing

  Background:
    * def urlBase = karate.properties['API_HOST_URL']
    * def authToken = karate.properties['Circle-Token']
    * configure headers = { Authorization: '#(authToken)' }
    * url urlBase

  Scenario: List contexts with valid query parameters
    Given path '/context'
    And param owner-id = 'c65b68ef-e73b-4bf2-be9a-7a322a9df150'
    When method GET
    Then status 200
    And match response.items == '#[]'
    And match response.items[*].id == '#string'
    And match response.items[*].name == '#string'
    And match response.items[*].created_at == '#string'
    And match response.next_page_token == '#? _ == null || typeof _ == "string"'

  Scenario Outline: List contexts with combinations of query parameters
    Given path '/context'
    And params { 'owner-id': '<owner_id>', 'owner-slug': '<owner_slug>', 'owner-type': '<owner_type>', 'page-token': '<page_token>' }
    When method GET
    Then status 200
    And match response.items == '#[]'
    And match response.items[*].id == '#string'
    And match response.items[*].name == '#string'
    And match response.items[*].created_at == '#string'
    And match response.next_page_token == '#? _ == null || typeof _ == "string"'

    Examples:
      | read('context_get.csv') |

  Scenario: Unauthorized access returns 401
    Given path '/context'
    When method GET
    Then status 401
    And match response.error == '#string'

  Scenario: Invalid query parameters return 400 error
    Given path '/context'
    And param owner-id = 'invalid_id'
    When method GET
    Then status 400
    And match response.error == '#string'

  Scenario: Unexpected server error returns 500
    Given path '/context'
    And param owner-id = 'valid-but-causes-error-id'
    When method GET
    Then status 500
    And match response.error == '#string'
