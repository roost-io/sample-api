# ********RoostGPT********

# Test generated by RoostGPT for test api-testing-karate-circleci-OAI-security using AI Type Azure Open AI and AI Model roostgpt-4-32k
# 
# Feature file generated for /me/collaborations_get for http method type GET 
# RoostTestHash=5aa3ccaa39
# 
# 

# ********RoostGPT********
Feature: Collaborations API Feature Tests

  Background:
    * def urlBase = karate.properties['API_HOST']
    * url urlBase

  Scenario Outline: Validate response for GET /me/collaborations (200 OK)
    Given path '/me/collaborations'
    And header Authorization = 'Basic ' + karate.properties['circle-token']
    When method GET
    Then status 200
    And match response == '#[]' # Ensure the response is an array
    And match each response[*].id == '##string' # UUID validation
    And match each response[*].vcs-type == '#string'
    And match each response[*].name == '#string'
    And match each response[*].avatar_url == '#string'
    And match each response[*].slug == '#string'

  Scenario Outline: Validate error for unauthorized access (401 Unauthorized)
    Given path '/me/collaborations'
    When method GET
    Then status 401
    And match response.error == '#string'
    And match response.error != null

  Scenario Outline: Validate default error response (default error response)
    Given path '/me/collaborations'
    And param invalid_param = '<invalid_param>'
    And header Authorization = 'Basic ' + karate.properties['circle-token']
    When method GET
    Then status != 200
    And match response.message == '#string'

    Examples:
      | invalid_param |
      | invalid_value |

  Scenario Outline: Validate proper error message content (error response validation)
    Given path '/me/collaborations'
    And header Authorization = 'Basic ' + karate.properties['invalid-token'] # Invalid token intentionally for test
    When method GET
    Then status 401
    And match response.message == 'Invalid token provided.' || response.message == 'Permission denied.'

    Examples:
      | invalid-token       |
      | expired_token_value |
