# ********RoostGPT********

# Test generated by RoostGPT for test Karate_Test using AI Type Open AI and AI Model gpt-4o
# 
# Feature file generated for /validateUser_post for http method type POST 
# RoostTestHash=6833318e32
# 
# 

# ********RoostGPT********
Feature: Validate User API Tests

  Background:
    * def urlBase = karate.properties['API_HOST']
    * url urlBase

  Scenario Outline: Validate user with valid input
    Given path 'validateUser'
    And request
      """
      { 
        "sourcePin": "<sourcePin>", 
        "targetPin": "<targetPin>" 
      }
      """
    And header Authorization = '<Authorization>'
    And header botId = '<botId>'
    And header accountId = '<accountId>'
    When method POST
    Then status 200
    And match response == '#object'
    And match response.path == 'validateUser'

    Examples:
      | read('validateUser_post.csv') |

  Scenario Outline: Validate user with missing or invalid headers
    Given path 'validateUser'
    And request
      """
      { 
        "sourcePin": "<sourcePin>", 
        "targetPin": "<targetPin>" 
      }
      """
    And header Authorization = '<Authorization>'
    And header botId = '<botId>'
    And header accountId = '<accountId>'
    When method POST
    Then status <status>
    And match response == '#object'
    And match response.err == '#object'
    And match response.err.message == '#string'

    Examples:
      | sourcePin                        | targetPin | Authorization | botId  | accountId | status |
      | 5aa5836c710427cfc7b48d3f58cd5779 |      1357 |               | bot123 | acc456    |    401 |
      | 5aa5836c710427cfc7b48d3f58cd5779 |      1357 | authToken     |        | acc456    |    401 |
      | 5aa5836c710427cfc7b48d3f58cd5779 |      1357 | authToken     | bot123 |           |    401 |

  Scenario Outline: Validate user with incorrect endpoint
    Given path 'invalidEndpoint'
    And request
      """
      { 
        "sourcePin": "<sourcePin>", 
        "targetPin": "<targetPin>" 
      }
      """
    And header Authorization = '<Authorization>'
    And header botId = '<botId>'
    And header accountId = '<accountId>'
    When method POST
    Then status 404
    And match response == '#object'
    And match response.err == '#object'
    And match response.err.message == '#string'

    Examples:
      | sourcePin                        | targetPin | Authorization | botId  | accountId |
      | 5aa5836c710427cfc7b48d3f58cd5779 |      1357 | authToken     | bot123 | acc456    |
