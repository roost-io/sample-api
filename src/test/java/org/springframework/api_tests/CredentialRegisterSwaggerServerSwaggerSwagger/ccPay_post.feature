# ********RoostGPT********

# Test generated by RoostGPT for test Karate_Test using AI Type Open AI and AI Model gpt-4o
# 
# Feature file generated for /ccPay_post for http method type POST 
# RoostTestHash=03941216e2
# 
# 

# ********RoostGPT********
Feature: Credit Card Payment API Tests

  Background:
    * def urlBase = karate.properties['API_HOST']
    * url urlBase
    * def headers =
      """
      {
        Authorization: 'Bearer <token>',
        botId: '<botId>',
        accountId: '<accountId>'
      }
      """

  Scenario Outline: Test POST /ccPay with valid input
    Given path 'ccPay'
    And requestHeaders headers
    And request
      """
      {
        customerId: <customerId>,
        amount: <amount>,
        currency: '<currency>',
        sourceAccountId: '<sourceAccountId>',
        targetAccountId: '<targetAccountId>',
        transactionType: <transactionType>,
        dueDate: '<dueDate>'
      }
      """
    When method POST
    Then status 200
    And match response == {}
    And match responseHeaders['Content-Type'] contains 'application/json'

    Examples:
      | read('ccPay_post.csv') |

  Scenario Outline: Test POST /ccPay with missing Authorization header
    Given path 'ccPay'
    And requestHeaders
      """
      {
        botId: '<botId>',
        accountId: '<accountId>'
      }
      """
    And request
      """
      {
        customerId: <customerId>,
        amount: <amount>,
        currency: '<currency>',
        sourceAccountId: '<sourceAccountId>',
        targetAccountId: '<targetAccountId>',
        transactionType: <transactionType>,
        dueDate: '<dueDate>'
      }
      """
    When method POST
    Then status 401
    And match response.err.message == '#string'

    Examples:
      | customerId | amount | currency | sourceAccountId | targetAccountId | transactionType | dueDate                      |
      |    1045304 |    300 | USD      |         1045302 |         1042224 |            1053 | 2021-03-24T00:00:00.000+0000 |

  Scenario Outline: Test POST /ccPay with invalid endpoint
    Given path 'ccPayInvalid'
    And requestHeaders headers
    And request
      """
      {
        customerId: <customerId>,
        amount: <amount>,
        currency: '<currency>',
        sourceAccountId: '<sourceAccountId>',
        targetAccountId: '<targetAccountId>',
        transactionType: <transactionType>,
        dueDate: '<dueDate>'
      }
      """
    When method POST
    Then status 404
    And match response.err.message == '#string'

    Examples:
      | customerId | amount | currency | sourceAccountId | targetAccountId | transactionType | dueDate                      |
      |    1045304 |    300 | USD      |         1045302 |         1042224 |            1053 | 2021-03-24T00:00:00.000+0000 |
