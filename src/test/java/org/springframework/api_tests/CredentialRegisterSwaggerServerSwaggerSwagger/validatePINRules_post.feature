# ********RoostGPT********

# Test generated by RoostGPT for test Karate_Test using AI Type Open AI and AI Model gpt-4o
# 
# Feature file generated for /validatePINRules_post for http method type POST 
# RoostTestHash=44d8aeba76
# 
# 

# ********RoostGPT********
Feature: Validate PIN Rules API

  Background:
    * def urlBase = karate.properties['API_HOST']
    * url urlBase
    * def headers =
      """
      { 
        Authorization: 'Bearer <token>', 
        botId: '<botId>', 
        accountId: '<accountId>' 
      }
      """

  Scenario Outline: Validate PIN with valid input
    Given path 'validatePINRules'
    And request
      """
      { 
        sourcePin: '<sourcePin>' 
      }
      """
    And headers headers
    When method POST
    Then status 200
    And match response == '#object'
    And match response contains { message: '#string' }

    Examples:
      | read('validatePINRules_post.csv') |

  Scenario Outline: Validate PIN with missing required headers
    Given path 'validatePINRules'
    And request
      """
      { 
        sourcePin: '<sourcePin>' 
      }
      """
    And headers
      """
      { 
        Authorization: 'Bearer <token>', 
        botId: '<botId>' 
      }
      """
    When method POST
    Then status 401
    And match response == '#object'
    And match response.err.message == '#string'

    Examples:
      | sourcePin |
      |     1357# |

  Scenario Outline: Validate PIN with invalid endpoint
    Given path 'invalidEndpoint'
    And request
      """
      { 
        sourcePin: '<sourcePin>' 
      }
      """
    And headers headers
    When method POST
    Then status 404
    And match response == '#object'
    And match response.err.message == '#string'

    Examples:
      | sourcePin |
      |     1357# |

  Scenario Outline: Validate PIN with missing Authorization header
    Given path 'validatePINRules'
    And request
      """
      { 
        sourcePin: '<sourcePin>' 
      }
      """
    And headers
      """
      { 
        botId: '<botId>', 
        accountId: '<accountId>' 
      }
      """
    When method POST
    Then status 401
    And match response == '#object'
    And match response.err.message == '#string'

    Examples:
      | sourcePin |
      |     1357# |
