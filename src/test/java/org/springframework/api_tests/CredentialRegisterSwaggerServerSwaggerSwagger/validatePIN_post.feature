# ********RoostGPT********

# Test generated by RoostGPT for test Karate_Test using AI Type Open AI and AI Model gpt-4o
# 
# Feature file generated for /validatePIN_post for http method type POST 
# RoostTestHash=3b396c4d7f
# 
# 

# ********RoostGPT********
Feature: Validate PIN API Tests

  Background:
    * def urlBase = karate.properties['API_HOST']
    * url urlBase
    * def headers = { Authorization: 'Bearer <token>', botId: '<botId>', accountId: '<accountId>' }

  Scenario Outline: Validate PINs with valid input
    Given path 'validatePIN'
    And request
      """
      { 
        sourcePin: '<sourcePin>', 
        targetPin: '<targetPin>', 
        profileInfo: { 
          customerId: '<customerId>', 
          accountNumber: '<accountNumber>', 
          ssn: '<ssn>' 
        } 
      }
      """
    And headers headers
    When method POST
    Then status 200
    And match response == '#object'
    And match response contains { message: '#string' }

    Examples:
      | read('validatePIN_post.csv') |

  Scenario Outline: Validate PINs with missing authorization
    Given path 'validatePIN'
    And request
      """
      { 
        sourcePin: '<sourcePin>', 
        targetPin: '<targetPin>', 
        profileInfo: { 
          customerId: '<customerId>', 
          accountNumber: '<accountNumber>', 
          ssn: '<ssn>' 
        } 
      }
      """
    And headers { botId: '<botId>', accountId: '<accountId>' }
    When method POST
    Then status 401
    And match response == '#object'
    And match response.err == '#object'
    And match response.err.message == '#string'

    Examples:
      | sourcePin | targetPin | customerId | accountNumber | ssn    |
      |     1357# |     1357# |      12345 |       1045301 | 123456 |

  Scenario Outline: Validate PINs with invalid endpoint
    Given path 'invalidEndpoint'
    And request
      """
      { 
        sourcePin: '<sourcePin>', 
        targetPin: '<targetPin>', 
        profileInfo: { 
          customerId: '<customerId>', 
          accountNumber: '<accountNumber>', 
          ssn: '<ssn>' 
        } 
      }
      """
    And headers headers
    When method POST
    Then status 404
    And match response == '#object'
    And match response.err == '#object'
    And match response.err.message == '#string'

    Examples:
      | sourcePin | targetPin | customerId | accountNumber | ssn    |
      |     1357# |     1357# |      12345 |       1045301 | 123456 |
