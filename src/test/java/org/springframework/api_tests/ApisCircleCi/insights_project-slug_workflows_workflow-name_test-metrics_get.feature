# ********RoostGPT********

# Test generated by RoostGPT for test Karate_Test using AI Type Open AI and AI Model gpt-4o
# 
# Feature file generated for /insights/{project-slug}/workflows/{workflow-name}/test-metrics_get for http method type GET 
# RoostTestHash=1e497c49fd
# 
# 

# ********RoostGPT********
Feature: Test Metrics for Project Workflows

  Background:
    * def urlBase = karate.properties['API_HOST']
    * url urlBase
    * header Authorization = 'Basic REPLACE_BASIC_AUTH'

  Scenario Outline: Get Test Metrics for a Project's Workflows
    Given path 'insights', '<project-slug>', 'workflows', '<workflow-name>', 'test-metrics'
    And param branch = '<branch>'
    And param all-branches = <all-branches>
    When method GET
    Then status 200
    And match response == '#object'
    And match response.average_test_count == '#number'
    And match response.most_failed_tests == '#array'
    And match response.most_failed_tests[*].p95_duration == '#number?'
    And match response.most_failed_tests[*].total_runs == '#number'
    And match response.most_failed_tests[*].classname == '#string?'
    And match response.most_failed_tests[*].failed_runs == '#number'
    And match response.most_failed_tests[*].flaky == '#boolean'
    And match response.most_failed_tests[*].source == '#string?'
    And match response.most_failed_tests[*].file == '#string?'
    And match response.most_failed_tests[*].job_name == '#string'
    And match response.most_failed_tests[*].test_name == '#string'
    And match response.most_failed_tests_extra == '#number'
    And match response.slowest_tests == '#array'
    And match response.slowest_tests[*].p95_duration == '#number?'
    And match response.slowest_tests[*].total_runs == '#number'
    And match response.slowest_tests[*].classname == '#string?'
    And match response.slowest_tests[*].failed_runs == '#number'
    And match response.slowest_tests[*].flaky == '#boolean'
    And match response.slowest_tests[*].source == '#string?'
    And match response.slowest_tests[*].file == '#string?'
    And match response.slowest_tests[*].job_name == '#string'
    And match response.slowest_tests[*].test_name == '#string'
    And match response.slowest_tests_extra == '#number'
    And match response.total_test_runs == '#number'
    And match response.test_runs == '#array'
    And match response.test_runs[*].pipeline_number == '#number'
    And match response.test_runs[*].workflow_id == '#string'
    And match response.test_runs[*].success_rate == '#number'
    And match response.test_runs[*].test_counts == '#object'
    And match response.test_runs[*].test_counts.error == '#number'
    And match response.test_runs[*].test_counts.failure == '#number'
    And match response.test_runs[*].test_counts.skipped == '#number'
    And match response.test_runs[*].test_counts.success == '#number'
    And match response.test_runs[*].test_counts.total == '#number'

    Examples:
      | read('insights_project-slug_workflows_workflow-name_test-metrics_get.csv') |

  Scenario: Error Response for Invalid Project Slug
    Given path 'insights', 'invalid-slug', 'workflows', 'build-and-test', 'test-metrics'
    When method GET
    Then status 404
    And match response == '#object'
    And match response.message == '#string'
