# ********RoostGPT********

# Test generated by RoostGPT for test Karate_Test using AI Type Open AI and AI Model gpt-4o
# 
# Feature file generated for /workflow/{id}/rerun_post for http method type POST 
# RoostTestHash=58e7ca1bbc
# 
# 

# ********RoostGPT********
Feature: Rerun Workflow API Tests

  Background:
    * def urlBase = karate.properties['API_HOST']
    * url urlBase

  Scenario Outline: Rerun a workflow with valid parameters
    Given path 'workflow', '<id>', 'rerun'
    And request
      """
      { 
        enable_ssh: <enable_ssh>, 
        from_failed: <from_failed>, 
        jobs: <jobs>, 
        sparse_tree: <sparse_tree> 
      }
      """
    When method POST
    Then status 202
    And match response == '#object'
    And match response.workflow_id == '#string'
    And match response.workflow_id == '#regex ^[0-9a-fA-F-]{36}$'

    Examples:
      | read('workflow_id_rerun_post.csv') |

  Scenario Outline: Rerun a workflow with invalid parameters
    Given path 'workflow', '<id>', 'rerun'
    And request
      """
      { 
        enable_ssh: <enable_ssh>, 
        from_failed: <from_failed>, 
        jobs: <jobs>, 
        sparse_tree: <sparse_tree> 
      }
      """
    When method POST
    Then status 400
    And match response == '#object'
    And match response.message == '#string'

    Examples:
      | id                                   | enable_ssh | from_failed | jobs | sparse_tree |
      | 5034460f-c7c4-4c43-9457-de07e2029e7b | false      | true        | []   | false       |
      | 5034460f-c7c4-4c43-9457-de07e2029e7b | false      | false       | []   | false       |

  Scenario Outline: Rerun a workflow with missing parameters
    Given path 'workflow', '<id>', 'rerun'
    And request
      """
      { 
        enable_ssh: <enable_ssh>, 
        from_failed: <from_failed> 
      }
      """
    When method POST
    Then status 400
    And match response == '#object'
    And match response.message == '#string'

    Examples:
      | id                                   | enable_ssh | from_failed |
      | 5034460f-c7c4-4c43-9457-de07e2029e7b | false      | false       |
      | 5034460f-c7c4-4c43-9457-de07e2029e7b | true       | false       |

  Scenario: Rerun a workflow with invalid ID
    Given path 'workflow', 'invalid-id', 'rerun'
    And request
      """
      { 
        enable_ssh: false, 
        from_failed: false, 
        jobs: ['c65b68ef-e73b-4bf2-be9a-7a322a9df150'], 
        sparse_tree: false 
      }
      """
    When method POST
    Then status 404
    And match response == '#object'
    And match response.message == '#string'
