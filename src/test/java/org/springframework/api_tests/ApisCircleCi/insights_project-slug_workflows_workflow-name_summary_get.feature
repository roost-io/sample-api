# ********RoostGPT********

# Test generated by RoostGPT for test Karate_Test using AI Type Open AI and AI Model gpt-4o
# 
# Feature file generated for /insights/{project-slug}/workflows/{workflow-name}/summary_get for http method type GET 
# RoostTestHash=2e0178896c
# 
# 

# ********RoostGPT********
Feature: Insights Workflow Summary API

  Background:
    * def urlBase = karate.properties['API_HOST']
    * url urlBase
    * header Authorization = 'Basic REPLACE_BASIC_AUTH'

  Scenario Outline: Get Workflow Summary with valid parameters
    Given path 'insights', '<project-slug>', 'workflows', '<workflow-name>', 'summary'
    And param all-branches = <all-branches>
    And param branch = '<branch>'
    When method GET
    Then status 200
    And match response.metrics == '#object'
    And match response.metrics.total_runs == '#number'
    And match response.metrics.successful_runs == '#number'
    And match response.metrics.mttr == '#number'
    And match response.metrics.total_credits_used == '#number'
    And match response.metrics.failed_runs == '#number'
    And match response.metrics.success_rate == '#number'
    And match response.metrics.completed_runs == '#number'
    And match response.metrics.window_start == '#string'
    And match response.metrics.duration_metrics == '#object'
    And match response.metrics.duration_metrics.min == '#number'
    And match response.metrics.duration_metrics.mean == '#number'
    And match response.metrics.duration_metrics.median == '#number'
    And match response.metrics.duration_metrics.p95 == '#number'
    And match response.metrics.duration_metrics.max == '#number'
    And match response.metrics.duration_metrics.standard_deviation == '#number'
    And match response.metrics.window_end == '#string'
    And match response.metrics.throughput == '#number'
    And match response.trends == '#object'
    And match response.trends.total_runs == '#number'
    And match response.trends.failed_runs == '#number'
    And match response.trends.success_rate == '#number'
    And match response.trends.p95_duration_secs == '#number'
    And match response.trends.median_duration_secs == '#number'
    And match response.trends.total_credits_used == '#number'
    And match response.trends.mttr == '#number'
    And match response.trends.throughput == '#number'
    And match response.workflow_names == '#[] string'

    Examples:
      | read('insights_project-slug_workflows_workflow-name_summary_get.csv') |

  Scenario: Get Workflow Summary with invalid project slug
    Given path 'insights', 'invalid/project-slug', 'workflows', 'build-and-test', 'summary'
    When method GET
    Then status 404
    And match response.message == '#string'

  Scenario: Get Workflow Summary with invalid workflow name
    Given path 'insights', 'gh/CircleCI-Public/api-preview-docs', 'workflows', 'invalid-workflow', 'summary'
    When method GET
    Then status 404
    And match response.message == '#string'

  Scenario: Get Workflow Summary with missing authorization
    * header Authorization = null
    Given path 'insights', 'gh/CircleCI-Public/api-preview-docs', 'workflows', 'build-and-test', 'summary'
    When method GET
    Then status 401
    And match response.message == '#string'
