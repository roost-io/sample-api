# ********RoostGPT********

# Test generated by RoostGPT for test Karate_Test using AI Type Open AI and AI Model gpt-4o
# 
# Feature file generated for /insights/{project-slug}/workflows/{workflow-name}_get for http method type GET 
# RoostTestHash=6fff7bb122
# 
# 

# ********RoostGPT********
Feature: Insights API Workflow Runs

  Background:
    * def urlBase = karate.properties['API_HOST']
    * url urlBase

  Scenario Outline: Get recent runs of a workflow with valid parameters
    Given path 'insights', '<project-slug>', 'workflows', '<workflow-name>'
    And param all-branches = <all-branches>
    And param branch = '<branch>'
    And param page-token = '<page-token>'
    And param start-date = '<start-date>'
    And param end-date = '<end-date>'
    When method GET
    Then status 200
    And match response.items == '#[] object'
    And match response.items[*].id == '#string'
    And match response.items[*].branch == '#string'
    And match response.items[*].duration == '#number'
    And match response.items[*].created_at == '#string'
    And match response.items[*].stopped_at == '#string?'
    And match response.items[*].credits_used == '#number'
    And match response.items[*].status == '#string'
    And match response.items[*].is_approval == '#boolean'
    And match response.next_page_token == '#string?'

    Examples:
      | read('insights_project-slug_workflows_workflow-name_get.csv') |

  Scenario: Handle error response for invalid project-slug
    Given path 'insights', 'invalid-slug', 'workflows', 'build-and-test'
    When method GET
    Then status 404
    And match response.message == '#string'

  Scenario: Handle error response for invalid workflow-name
    Given path 'insights', 'gh/CircleCI-Public/api-preview-docs', 'workflows', 'invalid-workflow'
    When method GET
    Then status 404
    And match response.message == '#string'
