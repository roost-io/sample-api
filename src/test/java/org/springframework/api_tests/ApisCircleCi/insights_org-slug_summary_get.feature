# ********RoostGPT********

# Test generated by RoostGPT for test Karate_Test using AI Type Open AI and AI Model gpt-4o
# 
# Feature file generated for /insights/{org-slug}/summary_get for http method type GET 
# RoostTestHash=c513aeede2
# 
# 

# ********RoostGPT********
Feature: Insights Summary API

  Background:
    * def urlBase = karate.properties['API_HOST']
    * url urlBase
    * configure headers = { Authorization: 'Basic REPLACE_BASIC_AUTH' }

  Scenario Outline: Get summary metrics with trends for the entire org and for each project
    Given path 'insights', '<org-slug>', 'summary'
    And param 'reporting-window' = '<reporting-window>'
    And param 'project-names' = '<project-names>'
    When method GET
    Then status 200
    And match response.org_data.metrics.total_runs == '#number'
    And match response.org_data.metrics.total_duration_secs == '#number'
    And match response.org_data.metrics.total_credits_used == '#number'
    And match response.org_data.metrics.success_rate == '#number'
    And match response.org_data.metrics.throughput == '#number'
    And match response.org_data.trends.total_runs == '#number'
    And match response.org_data.trends.total_duration_secs == '#number'
    And match response.org_data.trends.total_credits_used == '#number'
    And match response.org_data.trends.success_rate == '#number'
    And match response.org_data.trends.throughput == '#number'
    And match response.org_project_data == '#[]'
    And match response.all_projects == '#[]'

    Examples:
      | read('insights_org-slug_summary_get.csv') |

  Scenario Outline: Handle error response
    Given path 'insights', '<org-slug>', 'summary'
    And param 'reporting-window' = '<reporting-window>'
    And param 'project-names' = '<project-names>'
    When method GET
    Then status 400
    And match response.message == '#string'

    Examples:
      | org-slug             | reporting-window | project-names |
      | 'invalid-org'        | 'last-90-days'   | 'project1'    |
      | 'gh/CircleCI-Public' | 'invalid-window' | 'project2'    |
