# ********RoostGPT********

# Test generated by RoostGPT for test roostgpt-apispec using AI Type Claude AI and AI Model claude-sonnet-4-20250514
# 
# Feature file generated for /test/event/{trigger_id}/execute/report_get for http method type GET 
# RoostTestHash=a38d5a5d2a
# 
# 

# ********RoostGPT********
Feature: Test Execution Report API

  Background:
    * def urlBase = karate.properties['API_HOST']
    * url urlBase
    * configure headers = { Authorization: #('Bearer ' + karate.properties['bearer']) }

  Scenario Outline: Get test execution report with valid parameters
    Given path '/test/event/<trigger_id>/execute/report'
    And param file_choice = '<file_choice>'
    And param file_path = '<file_path>'
    When method GET
    Then status 200
    And match response == '#object'
    And match responseHeaders['content-type'] contains 'application/json'

    Examples:
      | read('test_event_trigger_id_execute_report_get.csv') |

  Scenario Outline: Get test execution report with invalid trigger_id
    Given path '/test/event/<trigger_id>/execute/report'
    And param file_choice = '<file_choice>'
    And param file_path = '<file_path>'
    When method GET
    Then status 404
    And match response.code == 404
    And match response.message == 'Not found'
    And match response.method == 'GET'
    And match response.path == '/test/event/' + '<trigger_id>' + '/execute/report'
    And match response.timestamp == '#string'
    And match response.timestamp == '#? karate.match(_, "\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}").isPass'
    And match responseHeaders['content-type'] contains 'application/json'

    Examples:
      | trigger_id | file_choice | file_path            |
      | invalid-id | report      | /path/to/report.json |
      | non-exist  | summary     | /logs/execution.log  |

  Scenario: Get test execution report without required query parameters
    Given path '/test/event/test-123/execute/report'
    When method GET
    Then status != 200
    And match response == '#object'
    And match responseHeaders['content-type'] contains 'application/json'

  Scenario: Get test execution report with missing file_choice parameter
    Given path '/test/event/test-123/execute/report'
    And param file_path = '/path/to/report.json'
    When method GET
    Then status != 200
    And match response == '#object'
    And match responseHeaders['content-type'] contains 'application/json'

  Scenario: Get test execution report with missing file_path parameter
    Given path '/test/event/test-123/execute/report'
    And param file_choice = 'report'
    When method GET
    Then status != 200
    And match response == '#object'
    And match responseHeaders['content-type'] contains 'application/json'

  Scenario Outline: Get test execution report with empty parameters
    Given path '/test/event/<trigger_id>/execute/report'
    And param file_choice = '<file_choice>'
    And param file_path = '<file_path>'
    When method GET
    Then status != 200
    And match response == '#object'
    And match responseHeaders['content-type'] contains 'application/json'

    Examples:
      | trigger_id | file_choice | file_path            |
      |            | report      | /path/to/report.json |
      | test-123   |             | /path/to/report.json |
      | test-123   | report      |                      |

  Scenario: Get test execution report without authorization
    Given path '/test/event/test-123/execute/report'
    And param file_choice = 'report'
    And param file_path = '/path/to/report.json'
    And configure headers = null
    When method GET
    Then status 401
    And match responseHeaders['content-type'] contains 'application/json'

  Scenario Outline: Get test execution report with various file choices and paths
    Given path '/test/event/valid-trigger/execute/report'
    And param file_choice = '<file_choice>'
    And param file_path = '<file_path>'
    When method GET
    Then status 200
    And match response == '#object'
    And match responseHeaders['content-type'] contains 'application/json'

    Examples:
      | read('test_event_trigger_id_execute_report_get.csv') |

  Scenario: Verify error response structure for default error case
    Given path '/test/event/error-trigger/execute/report'
    And param file_choice = 'invalid'
    And param file_path = '/invalid/path'
    When method GET
    Then status != 200
    And match response.code == '#number'
    And match response.message == '#string'
    And match response.method == '#string'
    And match response.method == '#regex (GET|DELETE|HEAD|OPTIONS|POST|PUT|PATCH|PURGE|LINK|UNLINK)'
    And match response.path == '#string'
    And match response.timestamp == '#string'
    And match response.timestamp == '#? karate.match(_, "\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}").isPass'
    And match responseHeaders['content-type'] contains 'application/json'
