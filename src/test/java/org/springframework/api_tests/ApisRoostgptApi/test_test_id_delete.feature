# ********RoostGPT********

# Test generated by RoostGPT for test roostgpt-apispec using AI Type Claude AI and AI Model claude-sonnet-4-20250514
# 
# Feature file generated for /test/{test_id}_delete for http method type DELETE 
# RoostTestHash=e9f4cbc408
# 
# 

# ********RoostGPT********
Feature: Delete Test API

  Background:
    * def urlBase = karate.properties['API_HOST']
    * url urlBase
    * configure headers = { Authorization: #('Bearer ' + karate.properties['bearer']) }

  Scenario Outline: Delete test with valid test_id
    Given path '/test/<test_id>'
    When method DELETE
    Then status <status_code>
    And match responseHeaders['content-type'] contains 'application/json'

    Examples:
      | test_id | status_code |
      | test123 |         200 |
      | abc456  |         200 |

  Scenario Outline: Delete test with invalid test_id - error responses
    Given path '/test/<test_id>'
    When method DELETE
    Then status <status_code>
    And match responseHeaders['content-type'] contains 'application/json'
    And match response.code == <expected_code>
    And match response.message == '<expected_message>'
    And match response.method == 'DELETE'
    And match response.path == '/test/<test_id>'
    And match response.timestamp == '#string'
    And match response.timestamp == '#regex \\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}.*'
    And match response == '#object'
    And match response.code == '#number'
    And match response.message == '#string'
    And match response.method == '#string'
    And match response.path == '#string'
    And match response.timestamp == '#string'

    Examples:
      | test_id     | status_code | expected_code | expected_message |
      | nonexistent |         404 |           404 | Not found        |
      | invalid123  |         404 |           404 | Not found        |

  Scenario: Delete test without authorization
    Given path '/test/test123'
    And configure headers = null
    When method DELETE
    Then status 401

  Scenario: Delete test with empty test_id
    Given path '/test/'
    When method DELETE
    Then status 404

  Scenario: Delete test with special characters in test_id
    Given path '/test/test@123#'
    When method DELETE
    Then status != 200
    And if (responseStatus != 200) match response.code == '#number'
    And if (responseStatus != 200) match response.message == '#string'
    And if (responseStatus != 200) match response.method == 'DELETE'
    And if (responseStatus != 200) match response.path contains '/test/'
    And if (responseStatus != 200) match response.timestamp == '#string'

  Scenario: Verify error response structure for default error
    Given path '/test/error_test'
    When method DELETE
    Then status != 200
    And match response == '#object'
    And match response.code == '#present'
    And match response.message == '#present'
    And match response.method == '#present'
    And match response.path == '#present'
    And match response.timestamp == '#present'
    And match response.code == '#number'
    And match response.message == '#string'
    And match response.method == '#string'
    And match response.path == '#string'
    And match response.timestamp == '#string'
    And match response.method == 'DELETE'
    And match response.method == '#? _ == "GET" || _ == "DELETE" || _ == "HEAD" || _ == "OPTIONS" || _ == "POST" || _ == "PUT" || _ == "PATCH" || _ == "PURGE" || _ == "LINK" || _ == "UNLINK"'
