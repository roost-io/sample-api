# ********RoostGPT********

# Test generated by RoostGPT for test integration-artillary-petstore-v3 using AI Type Azure Open AI and AI Model roostgpt-4-32k
# 
# ROOST_METHOD_HASH=ac23d55ccb
# ROOST_METHOD_SIG_HASH=3cc156ed38
# 
#  ########## Scenario ########## 
# 
# {
#   feature: 'Feature: Query pets by status and tags',
#   background: null,
#   rule: null,
#   scenario: {
#     title: 'Scenario: Retrieve pets by status',
#     steps: 'Given I set request-param "status" to "available"\n' +
#       'When I send GET request to "/pet/findByStatus"\n' +
#       'Then the response status code should be 200\n' +
#       'And each item in response JSON array should have a "status" equal to "available"',
#     examples: ''
#   }
# }
# 

# ********RoostGPT********
Feature: Query pets by status and tags

  Background:
    * def PETSTORE_V3_3273D64931_URL = karate.properties['PETSTORE_V3_3273D64931_URL'] || karate.get('PETSTORE_V3_3273D64931_URL', 'http://localhost:4010')
    * def PETSTORE_V3_3273D64931_AUTH_TOKEN = karate.properties['PETSTORE_V3_3273D64931_AUTH_TOKEN'] || karate.get('PETSTORE_V3_3273D64931_AUTH_TOKEN', 'Bearer_Dummy_Token')
    * url PETSTORE_V3_3273D64931_URL
    * configure headers =
      """
      {
        Authorization: #(karate.properties['AUTH_TOKEN'])
      }
      """

  Scenario: Retrieve pets by status
    Given path '/pet/findByStatus'
    And param status = 'available'
    When method get
    Then status 200
    And match response ==
      """
      #[]
      """
    And match each response[?(@.status)] == 'available'
    And match response[0].id == '#number'
    And match response[0].name == '#string'
    And match response[0].category.id == '#number'
    And match response[0].category.name == '#string'
    And match response[0].photoUrls ==
      """
      #[]
      """
    And match response[0].photoUrls[0] == '#string'
    And match response[0].tags ==
      """
      #[]
      """
    And match response[0].tags[0].id == '#number'
    And match response[0].tags[0].name == '#string'

  Scenario: Invalid status value
    Given path '/pet/findByStatus'
    And param status = 'invalid'
    When method get
    Then status 400
    And match response == null

  Scenario: Unexpected error
    Given path '/pet/findByStatus'
    And param status = 'pending'
    And configure headers =
      """
      {
        Authorization: 'Invalid_Token'
      }
      """
    When method get
    Then status 403
    And match response == null
